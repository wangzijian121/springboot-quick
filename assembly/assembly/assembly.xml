<assembly>
    <id>bin</id>
    <!--最终打包成一个用于发布的tar.gz文件-->
    <formats>
        <format>tar.gz</format>
        <format>dir</format>
    </formats>
    <fileSets>
        <!--模块jar包-->
        <fileSet>
            <directory>${project.parent.basedir}/base/target</directory>
            <outputDirectory>libs</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/m1/target</directory>
            <outputDirectory>libs</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/m1/target</directory>
            <outputDirectory>libs</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>

        <!--模块资源resources-->
<!--        <fileSet>
            <directory>${project.parent.basedir}/../config</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*.xml</include>
                <include>*.conf</include>
            </includes>
        </fileSet>-->

        <fileSet>
            <directory>${project.parent.basedir}/base/src/main/resources</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*prod.xml</include>
                <include>*prod.properties</include>
                <include>*prod.yml</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/m1/src/main/resources</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*prod.xml</include>
                <include>*prod.properties</include>
                <include>*prod.yml</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${project.parent.basedir}/m2/src/main/resources</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*prod.xml</include>
                <include>*prod.properties</include>
                <include>*prod.yml</include>
            </includes>
        </fileSet>

        <!--执行脚本-->
        <fileSet>
            <directory>${project.parent.basedir}/assembly/bin</directory>
            <outputDirectory>bin</outputDirectory>
            <includes>
                <include>*.sh</include>
            </includes>
        </fileSet>

        <!--db SQL文件-->
        <fileSet>
            <directory>${project.parent.basedir}/assembly/db</directory>
            <outputDirectory>db</outputDirectory>
        </fileSet>
        <!--文档目录-->
        <fileSet>
            <directory>${project.parent.basedir}/assembly/docs</directory>
            <outputDirectory>docs</outputDirectory>
        </fileSet>

        <!--logs-->
        <fileSet>
            <directory>${project.parent.basedir}/assembly/logs</directory>
            <outputDirectory>logs</outputDirectory>
        </fileSet>
    </fileSets>

    <dependencySets>
        <dependencySet>
            <!--不使用项目的artifact，第三方jar不要解压，打包进tar.gz文件的libs目录-->
            <!--配置项目第三方provided、system、runtime不同方式的jar打包进libs目录-->
            <unpack>false</unpack>
            <useProjectArtifact>true</useProjectArtifact>
            <outputDirectory>libs</outputDirectory>
            <scope>provided</scope>
            <excludes>
                <!--排除assembly模块的jar包-->
                <exclude>com.base:assembly</exclude>
            </excludes>
        </dependencySet>
        <dependencySet>
            <unpack>false</unpack>
            <useProjectArtifact>true</useProjectArtifact>
            <outputDirectory>libs</outputDirectory>
            <scope>system</scope>
            <excludes>
                <exclude>base:assembly</exclude>
            </excludes>
        </dependencySet>
        <dependencySet>
            <unpack>false</unpack>
            <useProjectArtifact>true</useProjectArtifact>
            <outputDirectory>libs</outputDirectory>
            <scope>runtime</scope>
            <excludes>
                <exclude>com.base:assembly</exclude>
            </excludes>
        </dependencySet>
    </dependencySets>

    <moduleSets>
        <moduleSet>
            <includes>
                <!--配置子模块，按groupId:artifactId配置，然后根据各子模块依赖的顺序排列-->
                <include>com.base:base</include>
                <include>com.base:m1</include>
                <include>com.base:m2</include>
            </includes>
            <binaries>
                <outputDirectory>libs</outputDirectory>
                <unpack>false</unpack>
            </binaries>
        </moduleSet>
    </moduleSets>

</assembly>